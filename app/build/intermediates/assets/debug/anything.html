 <!DOCTYPE html>
  <html>
 <head>
      <title>Hello Web - Controlling Processing from JavaScript</title>
      <script src="processing.js"></script>
  </head>
  <body style="padding:0; margin:0">
     <canvas style="padding:0; margin:0" id="sketch" data-processing-sources="anything.pde"></canvas>
      <button onclick="startSketch();">
         Start</button>
     <button onclick="stopSketch();">
         Stop</button>
     <script type="application/javascript">
         var processingInstance;
 
		function testEcho(message) {
			switchSketchState(true);
		}
		
         function startSketch() {
             switchSketchState(true);
         }
 
         function stopSketch() {
             switchSketchState(false);
         }
		 
		 function setEyeViewParams(isL,m0,m1,m2,m3,m4,m5,m6,m7,m8,m9,m10,m11,m12,m13,m14,m15) {
			
			if(!processingInstance) return;
			processingInstance.setEyeViewParams(isL,m0,m1,m2,m3,m4,m5,m6,m7,m8,m9,m10,m11,m12,m13,m14,m15);
			//processingInstance.changeBackColor(m0);
		 }
		 
		 function setEyeViewTransform(isL,px,py,pz,x,y,z,l,r,b,t) {
			if(!processingInstance) return;
			processingInstance.setEyeViewTransform(isL,px,py,pz,x,y,z,l,r,b,t);
		 }
		 
		 /*function setEyeViewParams(isL,m0,m1,m2,m3,m4,m5,m6,m7,m8,m9,m10,m11,m12,m13,m14,m15) {
			if (!processingInstance) {
                 processingInstance = Processing.getInstanceById('sketch');
             }
			 processingInstance.setEyeViewParams(isL,m0,m1,m2,m3,m4,m5,m6,m7,m8,m9,m10,m11,m12,m13,m14,m15);
			 processingInstance.changeBackColor(100);
		 }*/
 
         function switchSketchState(on) {
             if (!processingInstance) {
                 processingInstance = Processing.getInstanceById('sketch');
             }
 
             if (on) {
				//processingInstance.changeBackColor(100);
                 //processingInstance.loop();  // call Processing loop() function
             } else {
                 //processingInstance.noLoop(); // stop animation, call noLoop()
             }
         }
     </script>
 </body>
 </html>